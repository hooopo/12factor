## XI. 日志
### 把日志当成事件流

*日志* 让应用程序的行为变得透明。在基于服务器的运行环境中，通常日志被写到磁盘里德文件（日志文件）里；但这不是唯一的输出格式。

日志是[事件流](http://adam.heroku.com/past/2011/4/1/logs_are_streams_not_files/)的聚合。 按照时间顺序把所有运行的进程和后台服务的输出收集起来。原始形态的日志通常是一行（尽管异常的堆栈信息可能有多行）记录一件事的文本。日志没有确定的开始和结束，但会随着应用的运行一直流动。

**遵循“Web开发十二军规”的应用本身从不考虑如何切分或存储输出的事件流。**

应用本身不应该考虑如何写或处理日志文件。而是每个运行的进程把事件流输出到`标准输出（stdout）`。在本地开发环境, 开发者通过观察终端里的事件流来监视应用的行为。

在预发布或生产环境中，每个进程的事件流都会被运行环境捕获，并将其他输出流整理在一起，然后一起发送给一个或多个最终的处理程序，用于查看或是长期存档。这些存档目的对于应用来说不可见也不可配置，而是完全交给程序的运行环境管理。开源工具(比如 [Logplex](https://github.com/heroku/logplex) 和 [Fluent](https://github.com/fluent/fluentd))就是这个用途。

这些事件流可以输出至文件，或者使用tail工具在终端实时观察。最重要的，输出流可以被发送到像[Splunk](http://www.splunk.com/)这样的索引分析系统。或像[Hadoop/Hive](http://hive.apache.org/)这样的通用数据存储系统。这些系统为查看应用的历史活动提供了强大而灵活的功能，包括： 

1. 查找过去的特别事件。

2. 图形化一个大规模的趋势（比如每分钟处理的请求量）

3. 根据自定义的条件实时激活警报（比如每分钟的报错超过某个警戒线）

